[![Build Status](https://travis-ci.org/ameer1234567890/SmartWasher.svg?branch=master)](https://travis-ci.org/ameer1234567890/SmartWasher)

# SmartWasher
A smart washer using Arduino

#### How it works
* When `./gardenr.py` is run, it reads temperature, humidity and soil moisture level.
* It then updates these values to `./www/data.json` for later use by web frontend.
* It then updates the 15x2 LCD with the current time and soil moisture level.
* A preset moisture threshold is compared against the moisture level, and a notification is sent via IFTTT if soil is drier than the threshold.
* A python web server is then run with root `./www/`.
* The resulting frontend uses Javascript to query updated sensor data using AJAX.
* Now, all the collected data can be accessed by reaching `https://localhost` or Raspberry Pi's hostname.
* I use a self generated root CA which is installed on my devices.
* A certificate is generated by the root CA, for the Raspberry Pi.
* Since https is used, the resulting frontend is an fully compliant Progressive Web App (PWA).
* `./gardenr.py` can be made to run on startup, by running `sudo ./install-service`.
* Startup can be disabled by running `sudo ./uninstall-service`.
* Note: `./testdht.py`, `./testlcd.py` and `./testmoisture.py` are test scripts which are used for testing individual sensors.

#### Components Used
* Raspberry Pi 3B+
* DHT22
* Soil Moisture Sensor KY70
* Analog to Digital Converter (ADC) YL-40
* 15x2 I2C LCD with PCF8574 as driver

#### Pinout for DHT22
```
Wemos D1  -  Vibration Sensor
-----------------------------
5V        -  VCC
GND       -  GND
A0        -  SIG
```
